<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Malla Psicología U. Andrés Bello - Interactiva</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #fff0f6;
    color: #4a1a36;
    padding: 20px;
    margin: 0;
  }
  h1 {
    text-align: center;
    margin-bottom: 40px;
    color: #6a0f44;
  }
  #malla-container {
    max-width: 1200px;
    margin: auto;
  }
  .anio {
    margin-bottom: 50px;
  }
  .anio-title {
    font-size: 1.8rem;
    margin-bottom: 15px;
    color: #ad1457;
    border-bottom: 2px solid #ad1457;
    padding-bottom: 6px;
  }
  .semestres {
    display: flex;
    justify-content: space-between;
    gap: 10px;
    flex-wrap: wrap;
  }
  .semestre {
    background: #ffe6f0;
    border-radius: 8px;
    padding: 15px;
    flex: 1 1 220px;
    box-shadow: 0 3px 8px rgba(174,0,70,0.3);
  }
  .semestre-title {
    font-weight: 700;
    margin-bottom: 12px;
    text-align: center;
    color: #880e4f;
    border-bottom: 1px solid #880e4f;
    padding-bottom: 5px;
    font-size: 1.3rem;
  }
  .curso {
    background-color: #fce4ec;
    border-radius: 6px;
    padding: 12px;
    margin-bottom: 10px;
    cursor: pointer;
    border: 2px solid transparent;
    user-select: none;
    transition: background-color 0.3s, border-color 0.3s;
    font-size: 0.95rem;
    color: #6a0f44;
    text-align: center;
    font-weight: 600;
  }
  /* Ámbitos: tonos rosa */
  .ambito1 { background-color: #f8bbd0; } /* Interdisciplina */
  .ambito2 { background-color: #f48fb1; } /* Bases Conceptuales */
  .ambito3 { background-color: #f06292; } /* Diagnóstico */
  .ambito4 { background-color: #ec407a; } /* Intervención */
  .ambito5 { background-color: #e91e63; } /* Investigación */
  .curso.bloqueado {
    opacity: 0.5;
    cursor: not-allowed;
    border-color: transparent !important;
  }
  .curso.aprobado {
    background-color: #880e4f !important;
    color: white !important;
    border-color: #4a0033 !important;
    cursor: default;
  }
  #tooltip {
    position: fixed;
    background: #ad1457;
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 0.9rem;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s ease;
    max-width: 300px;
    z-index: 1000;
  }
</style>
</head>
<body>

<h1>Malla Interactiva Psicología – U. Andrés Bello</h1>

<div id="malla-container"></div>

<div id="tooltip"></div>

<script>
  const mallaContainer = document.getElementById('malla-container');
  const tooltip = document.getElementById('tooltip');

  const cursos = [
    // PRIMER AÑO
    { nombre: "Historia y Fundamentos de la Psicología", ambito: 2, prerrequisitos: [], año: 1, semestre: 1 },
    { nombre: "Tópicos de Neurobiología", ambito: 2, prerrequisitos: [], año: 1, semestre: 1 },
    { nombre: "Psicología y Sociedad", ambito: 2, prerrequisitos: [], año: 1, semestre: 1 },
    { nombre: "Inglés I", ambito: 1, prerrequisitos: [], año: 1, semestre: 1 },
    { nombre: "Eje de Formación Interdisciplinaria I", ambito: 1, prerrequisitos: [], año: 1, semestre: 1 },

    { nombre: "Sistemas Psicológicos", ambito: 2, prerrequisitos: [], año: 1, semestre: 2 },
    { nombre: "Procesos Psicológicos y Neurociencias", ambito: 2, prerrequisitos: ["Tópicos de Neurobiología"], año: 1, semestre: 2 },
    { nombre: "Psicología y Epistemología", ambito: 5, prerrequisitos: [], año: 1, semestre: 2 },
    { nombre: "Inglés II", ambito: 1, prerrequisitos: ["Inglés I"], año: 1, semestre: 2 },
    { nombre: "Habilidades Comunicativas", ambito: 1, prerrequisitos: [], año: 1, semestre: 2 },

    // SEGUNDO AÑO
    { nombre: "Psicoanálisis I", ambito: 2, prerrequisitos: [], año: 2, semestre: 3 },
    { nombre: "Psicología del Desarrollo I", ambito: 2, prerrequisitos: [], año: 2, semestre: 3 },
    { nombre: "Investigación I", ambito: 5, prerrequisitos: [], año: 2, semestre: 3 },
    { nombre: "Inglés III", ambito: 1, prerrequisitos: ["Inglés II"], año: 2, semestre: 3 },
    { nombre: "Razonamiento Científico y TICS", ambito: 1, prerrequisitos: ["Habilidades Comunicativas"], año: 2, semestre: 3 },

    { nombre: "Psicoanálisis II", ambito: 2, prerrequisitos: ["Psicoanálisis I"], año: 2, semestre: 4 },
    { nombre: "Psicología del Desarrollo II", ambito: 2, prerrequisitos: ["Psicología del Desarrollo I"], año: 2, semestre: 4 },
    { nombre: "Investigación II", ambito: 5, prerrequisitos: ["Investigación I"], año: 2, semestre: 4 },
    { nombre: "Inglés IV", ambito: 1, prerrequisitos: ["Inglés III"], año: 2, semestre: 4 },
    { nombre: "Eje de Formación Interdisciplinaria II", ambito: 1, prerrequisitos: [], año: 2, semestre: 4 },

    // Agrega más cursos según corresponda...
  ];

  const aprobados = new Set();

  function crearCursoElemento(curso) {
    const div = document.createElement('div');
    div.classList.add('curso', `ambito${curso.ambito}`, 'bloqueado');
    div.textContent = curso.nombre;

    // Desbloqueo inicial
    if (curso.prerrequisitos.every(pr => aprobados.has(pr)) || curso.prerrequisitos.length === 0) {
      div.classList.remove('bloqueado');
    }

    div.addEventListener('click', () => {
      if (div.classList.contains('bloqueado') || div.classList.contains('aprobado')) return;
      aprobados.add(curso.nombre);
      div.classList.add('aprobado');
      actualizarCursos();
    });

    div.addEventListener('mousemove', (e) => {
      tooltip.style.opacity = 1;
      tooltip.style.left = e.pageX + 15 + 'px';
      tooltip.style.top = e.pageY + 15 + 'px';
      const pre = curso.prerrequisitos.length > 0 ? curso.prerrequisitos.join(', ') : 'Ninguno';
      tooltip.textContent = `Prerrequisitos: ${pre}`;
    });

    div.addEventListener('mouseleave', () => {
      tooltip.style.opacity = 0;
    });

    return div;
  }

  function actualizarCursos() {
    document.querySelectorAll('.curso').forEach(div => {
      const nombre = div.textContent;
      const curso = cursos.find(c => c.nombre === nombre);
      const desbloqueado = curso.prerrequisitos.every(pr => aprobados.has(pr)) || curso.prerrequisitos.length === 0;

      if (desbloqueado) {
        div.classList.remove('bloqueado');
      } else {
        div.classList.add('bloqueado');
        div.classList.remove('aprobado');
        aprobados.delete(nombre);
      }
    });
  }

  function renderMalla() {
    const años = [...new Set(cursos.map(c => c.año))].sort((a,b) => a-b);

    años.forEach(año => {
      const divAño = document.createElement('div');
      divAño.classList.add('anio');

      const tituloAño = document.createElement('h2');
      tituloAño.classList.add('anio-title');
      tituloAño.textContent = `Año ${año}`;
      divAño.appendChild(tituloAño);

      const semestres = [...new Set(cursos.filter(c => c.año === año).map(c => c.semestre))].sort((a,b) => a-b);

      const divSemestres = document.createElement('div');
      divSemestres.classList.add('semestres');

      semestres.forEach(semestre => {
        const divSemestre = document.createElement('div');
        divSemestre.classList.add('semestre');

        const tituloSemestre = document.createElement('h3');
        tituloSemestre.classList.add('semestre-title');
        tituloSemestre.textContent = `Semestre ${semestre}`;
        divSemestre.appendChild(tituloSemestre);

        cursos
          .filter(c => c.año === año && c.semestre === semestre)
          .forEach(curso => {
            const divCurso = crearCursoElemento(curso);
            divSemestre.appendChild(divCurso);
          });

        divSemestres.appendChild(divSemestre);
      });

      mallaContainer.appendChild(divAño);
      mallaContainer.appendChild(divSemestres);
    });
  }

  renderMalla();
</script>

</body>
</html>
