<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malla Curricular Psicología</title>
    <link rel="stylesheet" href="estilos.css">
</head>
<body>
    <div class="header">
        <h1>MALLA PSICOLOGÍA - U ANDRÉS BELLO</h1>
        <div class="approved-counter">Ramos Aprobados: 0</div>
    </div>

    <div class="malla-container">
        <div class="year-block" data-year="1">
            <h2>PRIMER AÑO</h2>
            <div class="year-semesters-wrapper">
                <div class="semester-block" data-semester="1">
                    <h3>I SEMESTRE</h3>
                    <div class="ramo" data-ambito="1" data-id="1"><span>Psicodiagnóstico Clínico I</span></div>
                    <div class="ramo" data-ambito="2" data-id="2"><span>Psicopatología y Psiquiatría I</span></div>
                    <div class="ramo" data-ambito="3" data-id="3"><span>Taller de Integración</span></div>
                    <div class="ramo" data-ambito="4" data-id="4"><span>Psicología Social</span></div>
                    <div class="ramo" data-ambito="5" data-id="5"><span>Eje Formación Interdisciplinaria I</span></div>
                </div>
                <div class="semester-block" data-semester="2">
                    <h3>II SEMESTRE</h3>
                    <div class="ramo" data-ambito="1" data-id="6"><span>Psicodiagnóstico Clínico II</span></div>
                    <div class="ramo" data-ambito="2" data-id="7"><span>Psicopatología y Psiquiatría II</span></div>
                    <div class="ramo" data-ambito="3" data-id="8"><span>Psicología Educacional</span></div>
                </div>
            </div>
        </div>

        <div class="year-block" data-year="2">
            <h2>SEGUNDO AÑO</h2>
            <div class="year-semesters-wrapper">
                <div class="semester-block" data-semester="3">
                    <h3>III SEMESTRE</h3>
                    <div class="ramo" data-ambito="1" data-id="9"><span>Investigación</span></div>
                </div>
                <div class="semester-block" data-semester="4">
                    <h3>IV SEMESTRE</h3>
                    <div class="ramo" data-ambito="1" data-id="10"><span>Psicología del Desarrollo I</span></div>
                    <div class="ramo" data-ambito="2" data-id="11"><span>Teorías Neurobiológicas</span></div>
                </div>
            </div>
        </div>

        <div class="year-block" data-year="3">
            <h2>TERCER AÑO</h2>
            <div class="year-semesters-wrapper">
                <div class="semester-block" data-semester="5">
                    <h3>V SEMESTRE</h3>
                    <div class="ramo" data-ambito="1" data-id="12"><span>Clínica Sistémica</span></div>
                    <div class="ramo" data-ambito="2" data-id="13"><span>Psicopatología Infanto-juvenil</span></div>
                    <div class="ramo" data-ambito="3" data-id="14"><span>Diagnóstico e Intervención Educacional</span></div>
                </div>
                <div class="semester-block" data-semester="6">
                    <h3>VI SEMESTRE</h3>
                    <div class="ramo" data-ambito="1" data-id="15"><span>Psicología Jurídica</span></div>
                    <div class="ramo" data-ambito="2" data-id="16"><span>Diagnóstico e Intervención Organizacional</span></div>
                </div>
            </div>
        </div>

        <div class="year-block" data-year="4">
            <h2>CUARTO AÑO</h2>
            <div class="year-semesters-wrapper">
                <div class="semester-block" data-semester="7">
                    <h3>VII SEMESTRE</h3>
                    <div class="ramo" data-ambito="1" data-id="17"><span>Taller de Intervención Clínica</span></div>
                    <div class="ramo" data-ambito="2" data-id="18"><span>Psicología y Salud</span></div>
                </div>
                <div class="semester-block" data-semester="8">
                    <h3>VIII SEMESTRE</h3>
                    <div class="ramo" data-ambito="1" data-id="19"><span>Taller de Diagnóstico e Intervención Social</span></div>
                    <div class="ramo" data-ambito="2" data-id="20"><span>Electivo Formación Profesional I</span></div>
                </div>
            </div>
        </div>

        <div class="licenciado-separator">
            LICENCIADO (A) <br> EN <br> PSICOLOGÍA
        </div>

        <div class="year-block" data-year="5">
            <h2>QUINTO AÑO</h2>
            <div class="year-semesters-wrapper">
                <div class="semester-block" data-semester="9">
                    <h3>IX SEMESTRE</h3>
                    <div class="ramo" data-ambito="1" data-id="21"><span>Clínica Cognitivo Conductual</span></div>
                    <div class="ramo" data-ambito="2" data-id="22"><span>Diagnóstico y Evaluación</span></div>
                </div>
                <div class="semester-block" data-semester="10">
                    <h3>X SEMESTRE</h3>
                    <div class="ramo" data-ambito="1" data-id="23"><span>Psicología Positiva</span></div>
                    <div class="ramo" data-ambito="2" data-id="24"><span>Clínica Humanista Existencial</span></div>
                </div>
            </div>
        </div>
    </div>

    <div class="legend-container">
        <div class="legend-item" data-ambito="1">Ámbito I: Interdisciplina, Educación General e Inglés</div>
        <div class="legend-item" data-ambito="2">Ámbito II: Bases Conceptuales y/o Transversales</div>
        <div class="legend-item" data-ambito="3">Ámbito III: Diagnóstico</div>
        <div class="legend-item" data-ambito="4">Ámbito IV: Intervención</div>
        <div class="legend-item" data-ambito="5">Ámbito V: Investigación</div>
        <div class="legend-item" data-ambito="6">Experiencias Integradoras</div>
    </div>

    <script>
        // Funcionalidad para marcar ramos (sin cambios)
        document.addEventListener('DOMContentLoaded', () => {
            const ramos = document.querySelectorAll('.ramo');
            const approvedCounter = document.querySelector('.approved-counter');
            let approvedCount = 0;

            // Cargar estado guardado
            const savedState = JSON.parse(localStorage.getItem('mallaState')) || {};

            ramos.forEach(ramo => {
                const ramoId = ramo.dataset.id;
                if (savedState[ramoId] && savedState[ramoId].approved) {
                    ramo.classList.add('approved');
                    approvedCount++;
                }
                if (savedState[ramoId] && savedState[ramoId].locked) {
                    ramo.classList.add('locked');
                }
            });
            updateApprovedCounter();
            updateLockedRamos();

            ramos.forEach(ramo => {
                ramo.addEventListener('click', () => {
                    if (ramo.classList.contains('locked')) {
                        return; // No hacer nada si está bloqueado
                    }

                    ramo.classList.toggle('approved');
                    if (ramo.classList.contains('approved')) {
                        approvedCount++;
                    } else {
                        approvedCount--;
                    }
                    updateApprovedCounter();
                    saveState();
                    updateLockedRamos();
                });
            });

            function updateApprovedCounter() {
                approvedCounter.textContent = `Ramos Aprobados: ${approvedCount}`;
            }

            function saveState() {
                const currentState = {};
                ramos.forEach(ramo => {
                    const ramoId = ramo.dataset.id;
                    currentState[ramoId] = {
                        approved: ramo.classList.contains('approved'),
                        locked: ramo.classList.contains('locked')
                    };
                });
                localStorage.setItem('mallaState', JSON.stringify(currentState));
            }

            // Lógica de bloqueo de ramos (ejemplo simplificado)
            // Esto es solo un EJEMPLO. Necesitas definir tus propias reglas de pre-requisitos.
            function updateLockedRamos() {
                ramos.forEach(ramo => {
                    ramo.classList.remove('locked'); // Remover bloqueo para re-evaluar
                });

                // Ejemplo: Bloquear un ramo si otro no está aprobado
                // if (!document.querySelector('.ramo[data-id="1"]').classList.contains('approved')) {
                //     document.querySelector('.ramo[data-id="6"]').classList.add('locked');
                // }

                // Ejemplo: Solo puedes aprobar ramos del semestre actual o anteriores
                // Esta lógica es más compleja y depende de una definición clara de semestres "actuales".
                // Para una malla simple, podrías bloquear los ramos de semestres futuros.
                // Aquí se mantiene simple: si un ramo de un semestre anterior no está aprobado,
                // los del siguiente semestre podrían bloquearse.
                // Implementación real requiere un mapeo de dependencias de ramos.
            }
        });
    </script>
</body>
</html>
